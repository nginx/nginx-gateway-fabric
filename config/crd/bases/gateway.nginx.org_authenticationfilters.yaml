---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: authenticationfilters.gateway.nginx.org
spec:
  group: gateway.nginx.org
  names:
    categories:
    - nginx-gateway-fabric
    kind: AuthenticationFilter
    listKind: AuthenticationFilterList
    plural: authenticationfilters
    shortNames:
    - authfilter
    - authenticationfilter
    singular: authenticationfilter
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |-
          AuthenticationFilter configures request authentication and is
          referenced by HTTPRoute and GRPCRoute filters using ExtensionRef.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of the AuthenticationFilter.
            properties:
              basic:
                description: Basic configures HTTP Basic Authentication.
                properties:
                  realm:
                    description: |-
                      Realm used by NGINX `auth_basic` directive.
                      https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html#auth_basic
                      Also configures "realm="<realm_value>" in WWW-Authenticate header in error page location.
                    type: string
                  secretRef:
                    description: SecretRef allows referencing a Secret in the same
                      namespace.
                    properties:
                      name:
                        description: Name is the referenced object.
                        type: string
                    required:
                    - name
                    type: object
                required:
                - realm
                - secretRef
                type: object
              jwt:
                description: JWT configures JSON Web Token authentication (NGINX Plus).
                properties:
                  file:
                    description: |-
                      File specifies local JWKS configuration.
                      Required when Source == File.
                    properties:
                      secretRef:
                        description: SecretRef references a Secret containing the
                          JWKS.
                        properties:
                          name:
                            description: Name is the referenced object.
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - secretRef
                    type: object
                  keyCache:
                    description: |-
                      KeyCache is the cache duration for keys.
                      Configures `auth_jwt_key_cache` directive.
                      https://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_key_cache
                      Example: "auth_jwt_key_cache 10m;".
                    pattern: ^[0-9]{1,4}(ms|s|m|h)?$
                    type: string
                  leeway:
                    description: |-
                      Leeway is the acceptable clock skew for exp & nbf claims.
                      If exp & nbf claims are not defined, this directive takes no affect.
                      Configures `auth_jwt_leeway` directive.
                      https://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt_leeway
                      Example: "auth_jwt_leeway 60s".
                      Default: 0s.
                    pattern: ^[0-9]{1,4}(ms|s|m|h)?$
                    type: string
                  realm:
                    description: |-
                      Realm used by NGINX `auth_jwt` directive
                      https://nginx.org/en/docs/http/ngx_http_auth_jwt_module.html#auth_jwt
                      Configures "realm="<realm_value>" in WWW-Authenticate header in error page location.
                    type: string
                  remote:
                    description: |-
                      Remote specifies remote JWKS configuration.
                      Required when Source == Remote.
                    properties:
                      tls:
                        description: RemoteTLSConfig defines TLS settings for remote
                          JWKS retrieval.
                        properties:
                          secretRef:
                            description: |-
                              SecretRef references a Secret containing client TLS cert and key.
                              Expects secret type kubernetes.io/tls.
                            properties:
                              group:
                                default: ""
                                description: |-
                                  Group is the group of the referent. For example, "gateway.networking.k8s.io".
                                  When unspecified or empty string, core API group is inferred.
                                maxLength: 253
                                pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                                type: string
                              kind:
                                default: Secret
                                description: Kind is kind of the referent. For example
                                  "Secret".
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                                type: string
                              name:
                                description: Name is the name of the referent.
                                maxLength: 253
                                minLength: 1
                                type: string
                              namespace:
                                description: |-
                                  Namespace is the namespace of the referenced object. When unspecified, the local
                                  namespace is inferred.

                                  Note that when a namespace different than the local namespace is specified,
                                  a ReferenceGrant object is required in the referent namespace to allow that
                                  namespace's owner to accept the reference. See the ReferenceGrant
                                  documentation for details.

                                  Support: Core
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                            required:
                            - name
                            type: object
                          sni:
                            default: true
                            description: |-
                              SNI controls server name indication.
                              Configures `proxy_ssl_server_name` directive.
                              https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ssl_server_name
                            type: boolean
                          sniName:
                            description: |-
                              SNIName sets a custom SNI.
                              By default, NGINX uses the host from proxy_pass.
                              Configures `proxy_ssl_name` directive.
                              https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_ssl_name
                            type: string
                          verify:
                            default: true
                            description: Verify controls server certificate verification.
                            type: boolean
                        type: object
                      url:
                        type: string
                    required:
                    - url
                    type: object
                  source:
                    description: 'Source selects how JWT keys are provided: local
                      file or remote JWKS.'
                    enum:
                    - File
                    - Remote
                    type: string
                required:
                - realm
                - source
                type: object
                x-kubernetes-validations:
                - message: source File requires spec.file to be set.
                  rule: self.source != 'File' || has(self.file)
                - message: source Remote requires spec.remote to be set.
                  rule: self.source != 'Remote' || has(self.remote)
              type:
                description: Type selects the authentication mechanism.
                enum:
                - Basic
                type: string
            required:
            - type
            type: object
            x-kubernetes-validations:
            - message: type Basic requires spec.basic to be set.
              rule: self.type != 'Basic' || has(self.basic)
            - message: type JWT requires spec.jwt to be set.
              rule: self.type != 'JWT' || has(self.jwt)
          status:
            description: Status defines the state of the AuthenticationFilter.
            properties:
              controllers:
                description: |-
                  Controllers is a list of Gateway API controllers that processed the AuthenticationFilter
                  and the status of the AuthenticationFilter with respect to each controller.
                items:
                  properties:
                    conditions:
                      description: Conditions describe the status of the SnippetsFilter.
                      items:
                        description: Condition contains details for one aspect of
                          the current state of this API Resource.
                        properties:
                          lastTransitionTime:
                            description: |-
                              lastTransitionTime is the last time the condition transitioned from one status to another.
                              This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                            format: date-time
                            type: string
                          message:
                            description: |-
                              message is a human readable message indicating details about the transition.
                              This may be an empty string.
                            maxLength: 32768
                            type: string
                          observedGeneration:
                            description: |-
                              observedGeneration represents the .metadata.generation that the condition was set based upon.
                              For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                              with respect to the current state of the instance.
                            format: int64
                            minimum: 0
                            type: integer
                          reason:
                            description: |-
                              reason contains a programmatic identifier indicating the reason for the condition's last transition.
                              Producers of specific condition types may define expected values and meanings for this field,
                              and whether the values are considered a guaranteed API.
                              The value should be a CamelCase string.
                              This field may not be empty.
                            maxLength: 1024
                            minLength: 1
                            pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                            type: string
                          status:
                            description: status of the condition, one of True, False,
                              Unknown.
                            enum:
                            - "True"
                            - "False"
                            - Unknown
                            type: string
                          type:
                            description: type of condition in CamelCase or in foo.example.com/CamelCase.
                            maxLength: 316
                            pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                            type: string
                        required:
                        - lastTransitionTime
                        - message
                        - reason
                        - status
                        - type
                        type: object
                      maxItems: 8
                      minItems: 1
                      type: array
                      x-kubernetes-list-map-keys:
                      - type
                      x-kubernetes-list-type: map
                    controllerName:
                      description: |-
                        ControllerName is a domain/path string that indicates the name of the
                        controller that wrote this status. This corresponds with the
                        controllerName field on GatewayClass.

                        Example: "example.net/gateway-controller".

                        The format of this field is DOMAIN "/" PATH, where DOMAIN and PATH are
                        valid Kubernetes names
                        (https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names).

                        Controllers MUST populate this field when writing status. Controllers should ensure that
                        entries to status populated with their ControllerName are cleaned up when they are no
                        longer necessary.
                      maxLength: 253
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*\/[A-Za-z0-9\/\-._~%!$&'()*+,;=:]+$
                      type: string
                  required:
                  - controllerName
                  type: object
                maxItems: 16
                type: array
            type: object
        required:
        - metadata
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
