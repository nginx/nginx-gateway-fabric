# NGINX Kubernetes Gateway Helm Chart

## Introduction

This chart deploys the NGINX Kubernetes Gateway in your Kubernetes cluster.

## Prerequisites

- [Helm 3.0+](https://helm.sh/docs/intro/install/)
- [kubectl](https://kubernetes.io/docs/tasks/tools/)

> Note: NGINX Kubernetes Gateway can only run in the `nginx-gateway` namespace. This limitation will be addressed in
the future releases.
> Note: NGINX Kubernetes Gateway does not yet have a published chart.

1. Clone the repo and change into the `nginx-kubernetes-gateway` directory:

   ```
   git clone https://github.com/nginxinc/nginx-kubernetes-gateway.git
   cd nginx-kubernetes-gateway
   ```

### Installing the Chart from local

To install the chart with the release name `my-release` (`my-release` is the name that you choose) into the nginx-gateway
namespace (with optional `--create-namespace` flag - omit if the namespace already exists), and the Gateway API
resources from the standard channel (the CRDs and the validating webhook):

```
helm install my-release ./deploy/helm-chart --create-namespace --wait-for-jobs -n nginx-gateway
```

Optionally, you can install the the Gateway API resources separately and skip installing them as part of the helm
install:
```
kubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v0.7.1/standard-install.yaml
helm install my-release ./deploy/helm-chart --create-namespace --skip-crds -n nginx-gateway
```

### Uninstalling the Chart

To uninstall/delete the release `my-release`:

```
helm uninstall my-release -n nginx-gateway
```

The command removes all the Kubernetes components associated with the release and deletes the release.
> Note: Uninstalling the release does NOT uninstall the CRDs or validating webhook.

## Configuration

The following tables lists the configurable parameters of the NGINX Kubernetes Gateway chart and their default values.

|Parameter | Description | Default |
| --- | --- | --- |
|`nginxGateway.image.repository` | The repository for the NGINX Kubernetes Gateway image. | ghcr.io/nginxinc/nginx-kubernetes-gateway |
|`nginxGateway.image.tag` | The tag for the NGINX Kubernetes Gateway image. | edge |
|`nginxGateway.imagePullPolicy` | The imagePullPolicy for the NGINX Kubernetes Gateway image. | Always |
|`nginxGateway.gatewayClass` | The GatewayClass for the NGINX Kubernetes Gateway deployment. | nginx |
|`nginx.image.repository` | The repository for the NGINX image. | nginx |
|`nginx.image.tag` | The tag for the NGINX image. | 1.25 |
|`nginx.imagePullPolicy` | The imagePullPolicy for the NGINX image. | Always |
|`initContainer.image.repository` | The repository for the initContainer image. | busybox |
|`initContainer.image.tag` | The tag for the initContainer image. | 1.36 |
|`serviceAccount.annotations` | Annotations for the ServiceAccount used by the NGINX Kubernetes Gateway deployment. | {} |
|`serviceAccount.name` | Name of the ServiceAccount used by the NGINX Kubernetes Gateway deployment. | Autogenerated |
|`service.create` | Creates a service to expose the NGINX Kubernetes Gateway pods. | true |
|`service.type` | The type of service to create for the NGINX Kubernetes Gateway. | Loadbalancer |
|`service.externalTrafficPolicy` | The externalTrafficPolicy of the service. The value Local preserves the client source IP. | Local |
|`service.annotations` | The annotations of the NGINX Kubernetes Gateway service. | true |
|`service.ports` | A list of ports to expose through the NGINX Kubernetes Gateway service. Follows the conventional Kubernetes yaml syntax for service ports. | [ port: 80, targetPort: 80, protocol: TCP, name: http; port: 443, targetPort: 443, protocol: TCP, name: https ] |
