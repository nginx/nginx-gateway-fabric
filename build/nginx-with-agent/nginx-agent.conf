#
# /etc/nginx-agent/nginx-agent.conf
#
# Configuration file for NGINX Agent.
#
# This file is to track agent configuration values that are meant to be statically set. There  
# are additional agent configuration values that are set via the API and agent install script
# which can be found in /etc/nginx-agent/agent-dynamic.conf. 

log:
  # set log level (panic, fatal, error, info, debug, trace; default "info")
  level: info

dataplane:
  status:
    # poll interval for data plane status - the frequency the agent will query the dataplane for changes
    poll_interval: 30s
    # report interval for data plane status - the maximum duration to wait before syncing dataplane information if
    # no updates have being observed
    report_interval: 24h

metrics:
  # specify the size of a buffer to build before sending metrics
  bulk_size: 20
  # setting the report and collection interval to 1 year because our control plane doesn't implement the metrics server
  # so the agent spams the logs with error messages and retries. Ideally, we'll be able to disable the metrics
  # client altogether in the future.
  report_interval: 8760h
  collection_interval: 8760h
  mode: aggregated

# OSS NGINX default config path
# path to aux file dirs can also be added
config_dirs: "/etc/nginx"

server:
  host: 127.0.0.1 # change to nginx-gateway.nginx-gateway if testing agent in separate deployment
  grpcPort: 54789

# TLS is temporarily disabled. Once we fully separate the data plane from the control plane TLS will be enabled.
tls:
  enable: false
  skip_verify: true
