# Results

## Test environment

GKE cluster:

- Node count: 3
- Instance Type: e2-medium
- k8s version: 1.27.4-gke.900
- Zone: europe-west2-b
- Total vCPUs: 6
- Total RAM: 12GB
- Max pods per node: 110

NGF deployment:

- NGF version: edge - git commit a41e9e46d72788bceea8ba44e01d4062afec75fd
- NGINX Version: 1.25.2

## Test1: Running latte path based routing

Running 30s test @ http://cafe.example.com/latte
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    33.17ms    3.79ms  50.28ms   69.72%
    Req/Sec   150.93     14.21   202.00     80.27%
  Latency Distribution
     50%   33.96ms
     75%   35.81ms
     90%   37.21ms
     99%   41.29ms
  9041 requests in 30.07s, 3.22MB read
Requests/sec:    300.71
Transfer/sec:    109.54KB

## Test2: Running coffee header based routing

Running 30s test @ http://cafe.example.com/coffee
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    32.46ms    3.87ms  59.48ms   68.58%
    Req/Sec   154.29     15.66   202.00     75.42%
  Latency Distribution
     50%   33.38ms
     75%   35.22ms
     90%   36.65ms
     99%   40.23ms
  9239 requests in 30.07s, 2.71MB read
  Non-2xx or 3xx responses: 9239
Requests/sec:    307.24
Transfer/sec:     92.41KB

## Test3: Running coffee query based routing

Running 30s test @ http://cafe.example.com/coffee?TEST=v2
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    33.28ms    4.08ms  74.87ms   73.14%
    Req/Sec   150.54     15.00   202.00     79.10%
  Latency Distribution
     50%   33.98ms
     75%   35.85ms
     90%   37.30ms
     99%   42.90ms
  9015 requests in 30.06s, 3.28MB read
Requests/sec:    299.85
Transfer/sec:    111.86KB

## Test4: Running tea GET method based routing

Running 30s test @ http://cafe.example.com/tea
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    33.24ms    4.06ms  52.62ms   69.68%
    Req/Sec   150.55     16.33   212.00     76.42%
  Latency Distribution
     50%   33.93ms
     75%   36.03ms
     90%   37.66ms
     99%   42.30ms
  9016 requests in 30.05s, 3.19MB read
Requests/sec:    300.04
Transfer/sec:    108.71KB

## Test5: Running tea POST method based routing

Running 30s test @ http://cafe.example.com/tea
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    33.82ms    3.76ms  51.48ms   70.26%
    Req/Sec   148.05     13.87   202.00     81.10%
  Latency Distribution
     50%   34.39ms
     75%   36.27ms
     90%   37.91ms
     99%   42.34ms
  8866 requests in 30.06s, 3.14MB read
Requests/sec:    294.96
Transfer/sec:    106.87KB

## Observations

- There is a slight increase in relative performance for query based routing over the other methods, and a slight
  decrease in relative performance for POST method based routing (although that might be down to the tool).
- Otherwise, average latency per request and requests per second appears relatively stable across all routing methods.
