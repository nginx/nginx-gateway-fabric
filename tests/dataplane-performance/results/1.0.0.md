# Results

## Test environment

GKE cluster:

- Node count: 3
- Instance Type: e2-medium
- k8s version: 1.27.4-gke.900
- Zone: europe-west2-b
- Total vCPUs: 6
- Total RAM: 12GB
- Max pods per node: 110

NGF deployment:

- NGF version: edge - git commit a41e9e46d72788bceea8ba44e01d4062afec75fd
- NGINX Version: 1.25.2

## Test1: Running coffee path based routing

Running 30s test @ http://cafe.example.com/coffee
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    32.38ms   10.50ms 155.88ms   95.86%
    Req/Sec   157.97     23.28   210.00     84.73%
  Latency Distribution
     50%   31.47ms
     75%   34.70ms
     90%   36.45ms
     99%   79.92ms
  9441 requests in 30.07s, 3.36MB read
Requests/sec:    314.00
Transfer/sec:    114.38KB

## Test2: Running coffee header based routing

Running 30s test @ http://cafe.example.com/coffee
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    31.44ms    4.30ms  68.62ms   72.09%
    Req/Sec   159.35     17.03   202.00     73.91%
  Latency Distribution
     50%   31.61ms
     75%   34.61ms
     90%   36.24ms
     99%   41.03ms
  9533 requests in 30.04s, 3.39MB read
Requests/sec:    317.38
Transfer/sec:    115.61KB

## Test3: Running coffee query based routing

Running 30s test @ http://cafe.example.com/coffee?TEST=v2
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    31.93ms    4.14ms  57.80ms   67.35%
    Req/Sec   156.82     16.03   202.00     76.76%
  Latency Distribution
     50%   32.46ms
     75%   35.12ms
     90%   36.78ms
     99%   39.99ms
  9382 requests in 30.04s, 3.41MB read
Requests/sec:    312.34
Transfer/sec:    116.21KB

## Test4: Running tea GET method based routing

Running 30s test @ http://cafe.example.com/tea
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    31.69ms    4.14ms  52.77ms   70.05%
    Req/Sec   158.02     14.69   202.00     82.11%
  Latency Distribution
     50%   31.96ms
     75%   34.80ms
     90%   36.42ms
     99%   41.32ms
  9457 requests in 30.03s, 3.34MB read
Requests/sec:    314.87
Transfer/sec:    113.77KB

## Test5: Running tea POST method based routing

Running 30s test @ http://cafe.example.com/tea
  2 threads and 10 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    31.75ms    4.79ms 186.53ms   78.68%
    Req/Sec   157.90     15.58   212.00     81.77%
  Latency Distribution
     50%   31.86ms
     75%   34.86ms
     90%   36.53ms
     99%   41.55ms
  9451 requests in 30.05s, 3.33MB read
Requests/sec:    314.54
Transfer/sec:    113.65KB

## Observations

- Average latency per request appears stable across all routing methods.
- Average requests per second appears stable across all routing methods.
- Interesting to note that the basic path based routing method has the lowest performance in terms of latency and
  requests per second.
